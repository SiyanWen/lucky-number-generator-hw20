<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lucky Number Generator</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 720px; margin: 40px auto; padding: 0 16px; }
    .card { border: 1px solid #ddd; border-radius: 10px; padding: 16px; }
    .row { display: flex; gap: 12px; flex-wrap: wrap; }
    label { display: block; font-weight: 600; margin-bottom: 6px; }
    input { padding: 10px; border: 1px solid #ccc; border-radius: 8px; width: 100%; }
    .col { flex: 1 1 220px; }
    button { padding: 10px 14px; border: 0; border-radius: 8px; cursor: pointer; }
    button:hover { opacity: 0.9; }
    .btn { background: #111; color: #fff; }
    .muted { color: #666; font-size: 0.95rem; }
    .result { margin-top: 14px; padding: 12px; border-radius: 8px; background: #f6f6f6; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; }
  </style>
</head>
<body>
  <h1>Lucky Number Generator ðŸŽ²</h1>
  <p class="muted">Lucky number is generated from current date/time + your inputs. Press <b>Enter</b> or click the button.</p>

  <div class="card">
    <form id="luckyForm" autocomplete="off">
      <div class="row">
        <div class="col">
          <label for="name">Name</label>
          <input id="name" type="text" placeholder="e.g., Foo" />
        </div>
        <div class="col">
          <label for="favoriteNumber">Favorite Number</label>
          <input id="favoriteNumber" type="number" placeholder="e.g., 7" />
        </div>
        <div class="col">
          <label for="city">City</label>
          <input id="city" type="text" placeholder="e.g., San Jose" />
        </div>
      </div>

      <div style="margin-top: 14px;">
        <button class="btn" id="generateBtn" type="button">Generate Lucky Number</button>
      </div>
    </form>

    <div class="result" id="output" style="display:none;">
      <div><b>Your lucky number:</b> <span id="luckyNumber"></span></div>
      <div class="muted">Based on timestamp: <span class="mono" id="timestamp"></span></div>
      <div class="muted">Seed preview: <span class="mono" id="seedPreview"></span></div>
    </div>
  </div>

  <script>
    // Convert a string into a stable 32-bit integer hash
    function hashStringToInt(str) {
      // FNV-1a like hash (simple + fast)
      let hash = 2166136261;
      for (let i = 0; i < str.length; i++) {
        hash ^= str.charCodeAt(i);
        hash = Math.imul(hash, 16777619);
      }
      // Ensure unsigned 32-bit
      return hash >>> 0;
    }

    // A small deterministic PRNG from an integer seed (mulberry32)
    function mulberry32(seed) {
      return function() {
        let t = seed += 0x6D2B79F5;
        t = Math.imul(t ^ (t >>> 15), t | 1);
        t ^= t + Math.imul(t ^ (t >>> 7), t | 61);
        return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
      };
    }

    function buildSeedString() {
      const name = document.getElementById("name").value.trim().toLowerCase();
      const fav = document.getElementById("favoriteNumber").value.trim();
      const city = document.getElementById("city").value.trim().toLowerCase();

      const now = new Date();

      // Use date + time components (more "randomness" across time)
      const timeParts = [
        now.getFullYear(),
        now.getMonth() + 1,
        now.getDate(),
        now.getHours(),
        now.getMinutes(),
        now.getSeconds(),
        now.getMilliseconds()
      ].join("-");

      // Combine user inputs + time
      return `${name}|${fav}|${city}|${timeParts}`;
    }

    function generateLuckyNumber() {
      const seedStr = buildSeedString();
      const seedInt = hashStringToInt(seedStr);
      const rand = mulberry32(seedInt);

      // Lucky number range (1 - 100). You can change to 1-999, etc.
      const lucky = Math.floor(rand() * 100) + 1;

      // Show output
      const nowIso = new Date().toISOString();
      document.getElementById("luckyNumber").textContent = lucky;
      document.getElementById("timestamp").textContent = nowIso;
      document.getElementById("seedPreview").textContent = seedStr.slice(0, 60) + (seedStr.length > 60 ? "..." : "");
      document.getElementById("output").style.display = "block";
    }

    // Click button
    document.getElementById("generateBtn").addEventListener("click", generateLuckyNumber);

    // Enter key in ANY input triggers generation (form submit)
    document.getElementById("luckyForm").addEventListener("submit", (e) => {
      e.preventDefault();
      generateLuckyNumber();
    });

    // Make Enter work even if button is type="button"
    document.getElementById("luckyForm").addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        generateLuckyNumber();
      }
    });
  </script>
</body>
</html>
